{"ast":null,"code":"var _jsxFileName = \"/Users/james/iCloud Drive (Archive)/Documents/Code/fin-app/frontend/src/components/Navbar.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from 'react-router-dom';\nimport { Link } from 'react-router-dom';\nimport Spinner from \"react-bootstrap/Spinner\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../actions/authActions\";\nexport class Navbar extends Component {\n  constructor(props) {\n    super(props);\n\n    this.defocusInput = () => {\n      this.setState({\n        searchFocused: false\n      });\n    };\n\n    this.search = e => {\n      this.setState({\n        searchFocused: false\n      });\n      const path = \"/stock/\" + document.getElementById(\"nav-search\").value;\n      console.log(path);\n      this.props.history.push(path);\n    };\n\n    this.clarifySearch = e => {\n      var oldStonks = this.state.stocks;\n      this.setState({\n        //Filtering so the stocks displayed match input.\n        filteringStocks: oldStonks.filter(s => s.includes(e.target.value.toUpperCase()))\n      });\n    };\n\n    this.searchLink = stonk => {\n      console.log(stonk);\n      this.setState({\n        searchFocused: false\n      });\n\n      if (stonk.indexOf(\" \") < 0) {\n        document.getElementById(\"nav-search\").value = stonk;\n      } else {\n        document.getElementById(\"nav-search\").value = stonk.substring(0, stonk.indexOf(' '));\n      }\n\n      document.getElementById(\"submit_button\").click();\n    };\n\n    this.focusInput = e => {\n      e.preventDefault();\n      this.setState({\n        searchFocused: true\n      });\n    };\n\n    this.redirectLogin = () => {\n      this.props.history.push('/login');\n    };\n\n    this.logoutUser = () => {\n      this.props.logoutUser();\n      window.location.reload(false);\n    };\n\n    this.fetchQuote = ticker => {\n      let stringBuilder = ticker + \" | \";\n      return ticker; // return fetch('https://sandbox.iexapis.com/stable/stock/'+ticker+'/quote?token=Tpk_dee3dc6744404fa5a7f775b21b00554d')\n      //   .then(res => res.json())\n      //   .then(data => {\n      //      return stringBuilder + data.latestPrice + \" \" + data.change\n      //   })     \n    };\n\n    this.state = {\n      stocks: [],\n      filteringStocks: [],\n      searchFocused: false,\n      loggedIn: false,\n      formattedStocks: []\n    };\n  }\n\n  componentDidMount() {\n    //This event listener dictates whether we are to show or hide the \"autocomplete\" menu.\n    if (this.props.auth.isAuthenticated) {\n      this.setState({\n        loggedIn: true\n      });\n      let formatStock = [];\n      this.props.watchlists.watchlists.forEach(wl => {\n        wl.stocks.forEach(stock => {\n          formatStock.push(this.fetchQuote(stock)); // .then(res => formatStock.push(res))\n        });\n      });\n      this.setState({\n        formattedStocks: formatStock\n      });\n    }\n\n    document.addEventListener(\"click\", evt => {\n      if (evt.target != document.getElementById(\"nav-search\") && evt.target != document.getElementById(\"stock-option-nav\") && evt.target != document.getElementById(\"stock-select-div-nav\")) this.setState({\n        searchFocused: false\n      });\n    });\n    fetch('https://finnhub.io/api/v1/stock/symbol?exchange=US&token=brain17rh5rbgnjpuck0').then(res => res.json()).then(data => {\n      var stonks = [];\n\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].description.length > 0) stonks.push(data[i].symbol + \" - \" + data[i].description); //Just want ticker and name...\n      }\n\n      this.setState({\n        stocks: stonks,\n        filteringStocks: stonks\n      });\n    });\n  } //Triggered when defocusing input bar, hide all stocks.\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      class: \"navbar navbar-expand-lg navbar-dark bg-dark my-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"navbar-brand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-landmark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"navbar-toggler\",\n      type: \"button\",\n      \"data-toggle\": \"collapse\",\n      \"data-target\": \"#navbarSupportedContent\",\n      \"aria-controls\": \"navbarSupportedContent\",\n      \"aria-expanded\": \"false\",\n      \"aria-label\": \"Toggle navigation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"navbar-toggler-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"collapse navbar-collapse\",\n      id: \"navbarSupportedContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      class: \"navbar-nav mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      class: \"nav-link\",\n      href: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, \"Home \", /*#__PURE__*/React.createElement(\"span\", {\n      class: \"sr-only\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 26\n      }\n    }, \"(current)\"))), this.props.auth.isAuthenticated ? /*#__PURE__*/React.createElement(\"li\", {\n      class: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"watchlist_div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"dropdown_watchlist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, \"Watchlist\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"watchlist_content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, this.props.watchlists.watchlists[0] != undefined ? this.state.formattedStocks.map(wl => /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.search.bind(this, wl),\n      class: \"watchlist_item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 111\n      }\n    }, wl, /*#__PURE__*/React.createElement(\"hr\", {\n      id: \"break\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 180\n      }\n    }))) : null))) : null)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-sm-6 nav-mid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.search.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      autoComplete: \"off\",\n      class: \"form-control\",\n      type: \"search\",\n      id: \"nav-search\",\n      placeholder: \"Enter a Stock...\",\n      \"aria-label\": \"Search\",\n      onFocus: this.focusInput,\n      onChange: this.clarifySearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn btn-outline-success nav-btn\",\n      id: \"submit_button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      class: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, \"search\"))), this.state.searchFocused ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"stock-select-div-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      id: \"stock-list-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, this.state.filteringStocks == [] ? /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 59\n      }\n    }) : this.state.filteringStocks.map((item, index) => /*#__PURE__*/React.createElement(\"li\", {\n      class: \"stock-option-nav\",\n      onClick: this.searchLink.bind(this, item),\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 27\n      }\n    }, item)))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-sm-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-lg-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, this.state.loggedIn ? /*#__PURE__*/React.createElement(\"div\", {\n      class: \"logout_dropdown\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"logged_in_div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"user_icon\",\n      src: require('../images/user_img.png'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"log_links\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, this.props.auth.user.name)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"logged_in_content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 15\n      }\n    }, this.props.auth.user.email), /*#__PURE__*/React.createElement(\"hr\", {\n      id: \"hr_loggedout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      id: \"logout_btn\",\n      onClick: this.logoutUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, \"Logout\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      id: \"log_in_div\",\n      onClick: this.redirectLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, \"Login\")))));\n  }\n\n}\nNavbar.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired,\n  watchlists: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  user: state.user,\n  errors: state.errors,\n  watchlists: state.watchlists\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser\n})(withRouter(Navbar));","map":{"version":3,"sources":["/Users/james/iCloud Drive (Archive)/Documents/Code/fin-app/frontend/src/components/Navbar.js"],"names":["React","Component","withRouter","Link","Spinner","PropTypes","connect","logoutUser","Navbar","constructor","props","defocusInput","setState","searchFocused","search","e","path","document","getElementById","value","console","log","history","push","clarifySearch","oldStonks","state","stocks","filteringStocks","filter","s","includes","target","toUpperCase","searchLink","stonk","indexOf","substring","click","focusInput","preventDefault","redirectLogin","window","location","reload","fetchQuote","ticker","stringBuilder","loggedIn","formattedStocks","componentDidMount","auth","isAuthenticated","formatStock","watchlists","forEach","wl","stock","addEventListener","evt","fetch","then","res","json","data","stonks","i","length","description","symbol","render","undefined","map","bind","item","index","require","user","name","email","propTypes","func","isRequired","object","errors","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter} from 'react-router-dom';\nimport {Link} from 'react-router-dom'\nimport Spinner from \"react-bootstrap/Spinner\";\n\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../actions/authActions\";\n\nexport class Navbar extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      stocks: [],\n      filteringStocks: [],\n      searchFocused: false,\n      loggedIn: false,\n      formattedStocks: []\n    }\n  }\n\n  componentDidMount(){\n    //This event listener dictates whether we are to show or hide the \"autocomplete\" menu.\n    if (this.props.auth.isAuthenticated) {      \n      this.setState({loggedIn: true})\n      let formatStock = []\n\n      this.props.watchlists.watchlists.forEach(wl => {\n        wl.stocks.forEach(stock => {\n          formatStock.push(this.fetchQuote(stock))\n            // .then(res => formatStock.push(res))\n        })\n      })\n      this.setState({formattedStocks: formatStock})\n    }\n    document.addEventListener(\"click\", (evt) => {\n      if (evt.target != document.getElementById(\"nav-search\") \n      && evt.target != document.getElementById(\"stock-option-nav\")\n      && evt.target != document.getElementById(\"stock-select-div-nav\"))\n        this.setState({\n          searchFocused: false\n        })\n    });\n\n    fetch('https://finnhub.io/api/v1/stock/symbol?exchange=US&token=brain17rh5rbgnjpuck0')\n    .then((res) => res.json())\n    .then((data) => {\n      var stonks = []\n      for (let i = 0; i < data.length; i++){\n        if (data[i].description.length > 0)\n          stonks.push(data[i].symbol + \" - \" + data[i].description)//Just want ticker and name...\n      }\n      this.setState({\n        stocks: stonks,\n        filteringStocks: stonks\n      })\n    });\n  }\n\n  //Triggered when defocusing input bar, hide all stocks.\n  defocusInput = () => {\n    this.setState({\n      searchFocused: false\n    })\n  }\n  //This function will actually navigate to that page.\n  search = (e) => {\n    this.setState({\n      searchFocused: false\n    })\n    const path = \"/stock/\" + document.getElementById(\"nav-search\").value;\n    console.log(path)\n    this.props.history.push(path);\n  };\n\n  /**\n   * Every time search bar is modified, we must reflect change to show all\n   *  possible matches to the text\n   */\n  clarifySearch = (e) => {\n    var oldStonks = this.state.stocks\n    this.setState({\n      //Filtering so the stocks displayed match input.\n      filteringStocks: oldStonks.filter((s) => s.includes(e.target.value.toUpperCase()))\n    })\n  }\n\n  /**\n   * Takes input, navigates to that specific stocks page. Hides the selection menu\n   */\n  searchLink = (stonk) =>{\n    console.log(stonk)\n    this.setState({\n      searchFocused: false\n    })\n    if (stonk.indexOf(\" \") < 0){\n      document.getElementById(\"nav-search\").value = stonk\n    }\n    else{\n      document.getElementById(\"nav-search\").value = stonk.substring(0, stonk.indexOf(' '))\n    }\n      document.getElementById(\"submit_button\").click()\n  }\n\n  //Triggered when the input bar is focused, time to show all thew stonks.\n  focusInput = (e) => {\n    e.preventDefault();\n    this.setState({\n      searchFocused: true\n    })\n  }\n  //Redirects user to login page.\n  redirectLogin = () => {\n    this.props.history.push('/login')\n  }\n\n  //Function simply logs user out.\n  logoutUser = () => {\n    this.props.logoutUser();\n    window.location.reload(false)\n  }\n\n  /**\n   * Needed to fetch quote for watchlist ticker\n   * @param {*} ticker \n   *  Ticker we fetch quote for.\n   */\n  fetchQuote = (ticker) => {\n    let stringBuilder = ticker + \" | \"\n    return ticker\n    // return fetch('https://sandbox.iexapis.com/stable/stock/'+ticker+'/quote?token=Tpk_dee3dc6744404fa5a7f775b21b00554d')\n    //   .then(res => res.json())\n    //   .then(data => {\n    //      return stringBuilder + data.latestPrice + \" \" + data.change\n    //   })     \n  }\n  \n  render() {\n    return (\n      <div>\n        <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark my-nav\" >\n          <a class=\"navbar-brand\">\n          <i class=\"fas fa-landmark\"></i>\n          </a>\n          <button\n            class=\"navbar-toggler\"\n            type=\"button\"\n            data-toggle=\"collapse\"\n            data-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span class=\"navbar-toggler-icon\"></span>\n          </button>\n\n          <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n            <div class=\"col-sm-3\">\n              <ul class=\"navbar-nav mr-auto\">\n                <li class=\"nav-item active\">\n                  <a class=\"nav-link\" href=\"/home\">\n                    Home <span class=\"sr-only\">(current)</span>\n                  </a>\n                </li>\n                {this.props.auth.isAuthenticated?\n                <li class=\"nav-item\">\n                  <div class=\"watchlist_div\">\n                  <div class=\"dropdown_watchlist\">\n                    Watchlist\n                  </div>\n                    <div class=\"watchlist_content\">\n                      {this.props.watchlists.watchlists[0] != undefined? this.state.formattedStocks.map(wl => <div onClick={this.search.bind(this, wl)} class=\"watchlist_item\">{wl}<hr id=\"break\"/></div>): null}\n                    </div>\n                  </div>\n                  \n                </li> \n                : null\n                }\n              </ul>\n            </div>\n            <div class=\"col-sm-6 nav-mid\">\n              <form onSubmit={this.search.bind(this)}>\n                <input\n                  autoComplete=\"off\"\n                  class=\"form-control\"\n                  type=\"search\"\n                  id=\"nav-search\"\n                  placeholder=\"Enter a Stock...\"\n                  aria-label=\"Search\"\n                  onFocus={this.focusInput}\n                  onChange={this.clarifySearch}\n                />\n                <button\n                  class=\"btn btn-outline-success nav-btn\"\n                  id=\"submit_button\"\n                  type=\"submit\"\n                >\n                  <span class=\"material-icons\">search</span>\n                </button>\n              </form>\n              {this.state.searchFocused? \n                <div id=\"stock-select-div-nav\">\n                    <ul id=\"stock-list-nav\">\n                      {this.state.filteringStocks == [] ? <Spinner />: \n                        this.state.filteringStocks.map((item, index)  => (\n                          <li class=\"stock-option-nav\" onClick={this.searchLink.bind(this, item)} key={index}>{item}</li>\n                        ))\n                      }\n                    </ul>\n                  </div>:\n              null}\n            </div>\n            <div class=\"col-sm-1\">\n            \n            </div>\n            <div class=\"col-lg-2\">\n              {this.state.loggedIn? \n              <div class=\"logout_dropdown\">\n              <div id=\"logged_in_div\">\n                <img id=\"user_icon\" src={ require('../images/user_img.png') }></img>\n                <span id=\"log_links\">{this.props.auth.user.name}</span>\n              </div>\n              <div class=\"logged_in_content\">\n              <span>{this.props.auth.user.email}</span>\n                <hr id=\"hr_loggedout\"/>\n                <p id=\"logout_btn\" onClick={this.logoutUser}>Logout</p>\n              </div>\n            </div>\n              : <div id=\"log_in_div\" onClick={this.redirectLogin}>Login</div>}\n            </div>\n          </div>\n        </nav>\n      </div>\n    );\n  }\n}\nNavbar.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired,\n  watchlists: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth, \n  user: state.user,\n  errors: state.errors,\n  watchlists: state.watchlists\n});\n\nexport default connect(mapStateToProps, { logoutUser })(withRouter(Navbar));"]},"metadata":{},"sourceType":"module"}