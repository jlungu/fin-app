{"ast":null,"code":"var _jsxFileName = \"/Users/james/iCloud Drive (Archive)/Documents/Code/fin-app/frontend/src/components/StockHeader.js\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { updateWatchlist } from \"../actions/watchlistActions\";\nexport class StockHeader extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleFavorite = () => {\n      let favorites = this.props.watchlists.watchlists[0];\n\n      if (favorites.stocks.includes(this.state.ticker)) {\n        //Delete from watchlist.\n        let wl = favorites;\n        wl.stocks = wl.stocks.filter(w => w != this.state.ticker);\n        this.props.updateWatchlist(wl._id, wl, this.props.watchlists);\n        this.setState({\n          deleted: true\n        }); //ANIMATION! Shows alert, saying you removed it from watchlist. Then dissapears!\n\n        setTimeout(() => {\n          this.setState({\n            deleted: false\n          });\n        }, 3000);\n      } else {\n        //Add to watchlist\n        let wl = favorites;\n        wl.stocks.push(this.state.ticker);\n        this.props.updateWatchlist(wl._id, wl, this.props.watchlists);\n        this.setState({\n          added: true\n        });\n        setTimeout(() => {\n          this.setState({\n            added: false\n          });\n        }, 3000);\n      }\n    };\n\n    this.state = {\n      name: '',\n      exchange: '',\n      ticker: '',\n      onWatchlist: false,\n      added: false,\n      deleted: false\n    };\n  }\n\n  componentDidMount() {\n    //API Call to grab name, exchange stock is on, and ticker symbol!\n    fetch('https://finnhub.io/api/v1/stock/profile2?symbol=' + this.props.symbol + '&token=brain17rh5rbgnjpuck0').then(res => res.json()).then(data => {\n      this.setState({\n        name: data.name,\n        ticker: data.ticker,\n        exchange: data.exchange\n      });\n    }); //Checking if this stock is on our watchlist...only if user is logged in.\n\n    if (this.props.auth.isAuthenticated) {}\n  }\n  /**\n   * Triggered when user clicks on favorite button. When user does, it adds or deletes the stock from their favorites watchlist.\n   */\n\n\n  render() {\n    var {\n      name,\n      ticker,\n      exchange\n    } = this.state;\n\n    if (this.props.symbol == \"^DJI\") {\n      //DOW JONES isnt directly supported by finnhub. Manually inputting info\n      ticker = \"^DJI\";\n      name = \"Dow Jones Industrial Average\";\n      exchange = \"DJI - DJI REAL TIME PRICE.\";\n    }\n\n    if (this.props.symbol == \"^GSPC\") {\n      //DOW JONES isnt directly supported by finnhub. Manually inputting info\n      ticker = \"^GSPC\";\n      name = \"S&P 500 - Standard and Poor's 500\";\n      exchange = \"SNP - SNP REAL TIME PRICE.\";\n    }\n\n    if (this.props.symbol == \"^IXIC\") {\n      //DOW JONES isnt directly supported by finnhub. Manually inputting info\n      ticker = \"^IXIC\";\n      name = \"NASDAQ Composite\";\n      exchange = \"NASDAQ GIDS - NASDAQ GIDS REAL TIME PRICE. \";\n    }\n\n    if (this.props.symbol == \"^RUT\") {\n      //DOW JONES isnt directly supported by finnhub. Manually inputting info\n      ticker = \"^RUT\";\n      name = \"Russell 2000\";\n      exchange = \"CHICAGO OPTIONS - CHICAGO OPTIONS DELAYED PRICE.\";\n    }\n\n    let favorites = this.props.watchlists.watchlists[0];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"stock-hdr-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"stock_header_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"stock-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, ticker, \" - \", name), favorites != undefined ? favorites.stocks.includes(this.state.ticker) ? /*#__PURE__*/React.createElement(\"i\", {\n      id: \"favorite_button_filled\",\n      onClick: this.toggleFavorite,\n      class: \"fas fa-star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    }) : /*#__PURE__*/React.createElement(\"i\", {\n      id: \"favorite_button\",\n      onClick: this.toggleFavorite,\n      class: \"far fa-star\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 23\n      }\n    }) : null), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"stock-subheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, exchange), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"watchlist_alert\",\n      class: \"alert alert-success  fade show\",\n      role: \"alert\",\n      hidden: !this.state.added,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, this.state.ticker), \" added to favorites\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"watchlist_alert\",\n      class: \"alert alert-danger  fade show\",\n      role: \"alert\",\n      hidden: !this.state.deleted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, this.state.ticker), \" removed from favorites\"));\n  }\n\n}\nStockHeader.propTypes = {\n  updateWatchlist: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired,\n  watchlists: PropTypes.object.isRequired,\n  errors: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth,\n  user: state.user,\n  watchlists: state.watchlists,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps, {\n  updateWatchlist\n})(StockHeader);","map":{"version":3,"sources":["/Users/james/iCloud Drive (Archive)/Documents/Code/fin-app/frontend/src/components/StockHeader.js"],"names":["React","Component","PropTypes","connect","updateWatchlist","StockHeader","constructor","props","toggleFavorite","favorites","watchlists","stocks","includes","state","ticker","wl","filter","w","_id","setState","deleted","setTimeout","push","added","name","exchange","onWatchlist","componentDidMount","fetch","symbol","then","res","json","data","auth","isAuthenticated","render","undefined","propTypes","func","isRequired","object","errors","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { updateWatchlist } from \"../actions/watchlistActions\";\n\nexport class StockHeader extends Component {\n    constructor(props){\n        super(props);\n        this.state ={\n            name: '',\n            exchange: '',\n            ticker: '',\n            onWatchlist: false,\n            added: false,\n            deleted: false\n        }\n    }\n\n    componentDidMount(){\n        //API Call to grab name, exchange stock is on, and ticker symbol!\n        fetch('https://finnhub.io/api/v1/stock/profile2?symbol=' + this.props.symbol +'&token=brain17rh5rbgnjpuck0')\n        .then(res => res.json())\n        .then(data => {this.setState({\n            name: data.name,\n            ticker: data.ticker,\n            exchange: data.exchange\n        })      \n        })\n        //Checking if this stock is on our watchlist...only if user is logged in.\n        if (this.props.auth.isAuthenticated){\n\n        }\n    }\n    /**\n     * Triggered when user clicks on favorite button. When user does, it adds or deletes the stock from their favorites watchlist.\n     */\n    toggleFavorite = () =>{\n        let favorites = this.props.watchlists.watchlists[0]\n        if (favorites.stocks.includes(this.state.ticker)){\n            //Delete from watchlist.\n            let wl = favorites\n            wl.stocks = wl.stocks.filter(w => w != this.state.ticker)\n            this.props.updateWatchlist(wl._id, wl, this.props.watchlists)\n            this.setState({deleted: true})//ANIMATION! Shows alert, saying you removed it from watchlist. Then dissapears!\n            setTimeout(() => {this.setState({deleted: false})}, 3000)\n        }\n        else {\n            //Add to watchlist\n            let wl = favorites\n            wl.stocks.push(this.state.ticker)\n            this.props.updateWatchlist(wl._id, wl, this.props.watchlists)\n            this.setState({added: true})\n            setTimeout(() => {this.setState({added: false})}, 3000)\n        }\n    }\n    \n    render(){\n        var {name, ticker, exchange} = this.state;\n        if (this.props.symbol == \"^DJI\"){\n            //DOW JONES isnt directly supported by finnhub. Manually inputting info\n            ticker = \"^DJI\"\n            name = \"Dow Jones Industrial Average\"\n            exchange = \"DJI - DJI REAL TIME PRICE.\"\n        }\n        if (this.props.symbol == \"^GSPC\"){\n            //DOW JONES isnt directly supported by finnhub. Manually inputting info\n            ticker = \"^GSPC\"\n            name = \"S&P 500 - Standard and Poor's 500\"\n            exchange = \"SNP - SNP REAL TIME PRICE.\"\n        }\n        if (this.props.symbol == \"^IXIC\"){\n            //DOW JONES isnt directly supported by finnhub. Manually inputting info\n            ticker = \"^IXIC\"\n            name = \"NASDAQ Composite\"\n            exchange = \"NASDAQ GIDS - NASDAQ GIDS REAL TIME PRICE. \"\n        }\n        if (this.props.symbol == \"^RUT\"){\n            //DOW JONES isnt directly supported by finnhub. Manually inputting info\n            ticker = \"^RUT\"\n            name = \"Russell 2000\"\n            exchange = \"CHICAGO OPTIONS - CHICAGO OPTIONS DELAYED PRICE.\"\n        }\n        let favorites = this.props.watchlists.watchlists[0]\n        return(\n            <div class=\"stock-hdr-div\">\n                <div id=\"stock_header_name\">\n                <span id=\"stock-header\">{ticker} - {name}</span>\n                {favorites != undefined? favorites.stocks.includes(this.state.ticker)?\n                    <i id=\"favorite_button_filled\" onClick={this.toggleFavorite} class=\"fas fa-star\"></i>\n                    : <i id=\"favorite_button\" onClick={this.toggleFavorite} class=\"far fa-star\"></i>\n                :null}\n                {/* {this.props.watchlists.watchlists.length > 0? this.props.watchlists.watchlists[0].includes(this.state.name)? <i id=\"favorite_button_filled\" onClick={this.toggleFavorite} class=\"fas fa-star\"></i>\n                : <i id=\"favorite_button\" onClick={this.toggleFavorite} class=\"far fa-star\"></i>: null} */}\n                </div>\n                <span id=\"stock-subheader\">{exchange}</span>\n                <div id=\"watchlist_alert\" class=\"alert alert-success  fade show\" role=\"alert\" hidden={!this.state.added}>\n                    <strong>{this.state.ticker}</strong> added to favorites\n                </div>\n                <div id=\"watchlist_alert\" class=\"alert alert-danger  fade show\" role=\"alert\" hidden={!this.state.deleted}>\n                    <strong>{this.state.ticker}</strong> removed from favorites\n                </div>\n            </div>\n        );\n    }\n}\n\nStockHeader.propTypes = {\n    updateWatchlist: PropTypes.func.isRequired,\n    auth: PropTypes.object.isRequired,\n    watchlists: PropTypes.object.isRequired,\n    errors: PropTypes.object.isRequired\n  };\n  \n  const mapStateToProps = state => ({\n    auth: state.auth, \n    user: state.user,\n    watchlists: state.watchlists, \n    errors: state.errors\n  });\n  \n  export default connect(mapStateToProps, { updateWatchlist })(StockHeader);"]},"metadata":{},"sourceType":"module"}