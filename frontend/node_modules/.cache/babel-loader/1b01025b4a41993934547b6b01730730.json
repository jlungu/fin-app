{"ast":null,"code":"import axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\nimport { GET_ERRORS, SET_CURRENT_USER, USER_LOADING } from \"./types\"; //REGISTER\n\nexport const registerUser = (userData, history) => dispatch => {\n  axios.post(\"/api/users/register\", userData).then(res => history.push(\"/login\")) //Redir to login page!\n  .catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  })); //WHEN REGISTERING, A USER IS AUTOMATCALLY ASSIGNED A WATCHLIST\n\n  const watchlist = {\n    email: user.email,\n    listname: \"Favorites\",\n    stocks: []\n  };\n  axios.post(\"/api/watchlists/add\", watchlist).then(res => localStorage.setItem(\"watchlists\", [watchlist])) //SETTING LOCAL STORAGE APPROPRIATELY\n  .catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; //LOGIN\n\nexport const loginUser = userData => dispatch => {\n  axios.post(\"http://localhost:5000/api/users/login\", userData).then(res => {\n    //SAVING TOKEN TO LOCAL STORAGE\n    console.log(res.data);\n    const {\n      token\n    } = res.data;\n    localStorage.setItem(\"jwtToken\", token);\n    setAuthToken(token);\n    const usr = jwt_decode(token);\n    dispatch(setCurrentUser(usr));\n  }).catch(err => dispatch({\n    type: GET_ERRORS,\n    payload: err.response.data\n  }));\n}; //SETTING SESSION USER\n\nexport const setCurrentUser = usr => {\n  return {\n    type: SET_CURRENT_USER,\n    payload: usr\n  };\n}; //SETTING USER LOADING\n\nexport const setUserLoading = () => {\n  return {\n    type: USER_LOADING\n  };\n};\nexport const logoutUser = () => dispatch => {\n  //REMOVE TOKEN FROM LOCAL STORAGE\n  localStorage.removeItem(\"jwtToken\");\n  setAuthToken(false); //NOW, NO CURRENT USER\n\n  dispatch(setCurrentUser({}));\n};","map":{"version":3,"sources":["/Users/james/iCloud Drive (Archive)/Documents/Code/fin-app/frontend/src/actions/authActions.js"],"names":["axios","setAuthToken","jwt_decode","GET_ERRORS","SET_CURRENT_USER","USER_LOADING","registerUser","userData","history","dispatch","post","then","res","push","catch","err","type","payload","response","data","watchlist","email","user","listname","stocks","localStorage","setItem","loginUser","console","log","token","usr","setCurrentUser","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,SAASC,UAAT,EAAqBC,gBAArB,EAAuCC,YAAvC,QAA2D,SAA3D,C,CAEA;;AACA,OAAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAWC,OAAX,KAAuBC,QAAQ,IAAI;AAC3DT,EAAAA,KAAK,CAACU,IAAN,CAAW,qBAAX,EAAkCH,QAAlC,EACKI,IADL,CACUC,GAAG,IAAIJ,OAAO,CAACK,IAAR,CAAa,QAAb,CADjB,EACwC;AADxC,GAEKC,KAFL,CAEWC,GAAG,IAAIN,QAAQ,CAAC;AAACO,IAAAA,IAAI,EAAEb,UAAP;AAAmBc,IAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaC;AAAzC,GAAD,CAF1B,EAD2D,CAK3D;;AACA,QAAMC,SAAS,GAAG;AACdC,IAAAA,KAAK,EAAEC,IAAI,CAACD,KADE;AAEdE,IAAAA,QAAQ,EAAE,WAFI;AAGdC,IAAAA,MAAM,EAAE;AAHM,GAAlB;AAKAxB,EAAAA,KAAK,CAACU,IAAN,CAAW,qBAAX,EAAkCU,SAAlC,EACKT,IADL,CACUC,GAAG,IAAIa,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,CAACN,SAAD,CAAnC,CADjB,EACiE;AADjE,GAEKN,KAFL,CAEWC,GAAG,IAAIN,QAAQ,CAAC;AAACO,IAAAA,IAAI,EAAEb,UAAP;AAAmBc,IAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaC;AAAzC,GAAD,CAF1B;AAGH,CAdM,C,CAgBP;;AACA,OAAO,MAAMQ,SAAS,GAAIpB,QAAD,IAAcE,QAAQ,IAAK;AAChDT,EAAAA,KAAK,CAACU,IAAN,CAAW,uCAAX,EAAoDH,QAApD,EACKI,IADL,CACUC,GAAG,IAAI;AACT;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAYjB,GAAG,CAACO,IAAhB;AACA,UAAM;AAAEW,MAAAA;AAAF,QAAYlB,GAAG,CAACO,IAAtB;AACAM,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCI,KAAjC;AACA7B,IAAAA,YAAY,CAAC6B,KAAD,CAAZ;AACA,UAAMC,GAAG,GAAG7B,UAAU,CAAC4B,KAAD,CAAtB;AACArB,IAAAA,QAAQ,CAACuB,cAAc,CAACD,GAAD,CAAf,CAAR;AACH,GATL,EAUKjB,KAVL,CAUWC,GAAG,IAAIN,QAAQ,CAAC;AAACO,IAAAA,IAAI,EAAEb,UAAP;AAAmBc,IAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaC;AAAzC,GAAD,CAV1B;AAWH,CAZM,C,CAcP;;AACA,OAAO,MAAMa,cAAc,GAAGD,GAAG,IAAI;AACjC,SAAO;AACHf,IAAAA,IAAI,EAAEZ,gBADH;AAEHa,IAAAA,OAAO,EAAEc;AAFN,GAAP;AAIH,CALM,C,CAMP;;AACA,OAAO,MAAME,cAAc,GAAG,MAAM;AAChC,SAAO;AACHjB,IAAAA,IAAI,EAAEX;AADH,GAAP;AAGH,CAJM;AAMP,OAAO,MAAM6B,UAAU,GAAG,MAAMzB,QAAQ,IAAI;AACxC;AACAgB,EAAAA,YAAY,CAACU,UAAb,CAAwB,UAAxB;AACAlC,EAAAA,YAAY,CAAC,KAAD,CAAZ,CAHwC,CAIxC;;AACAQ,EAAAA,QAAQ,CAACuB,cAAc,CAAC,EAAD,CAAf,CAAR;AACH,CANM","sourcesContent":["import axios from \"axios\"\nimport setAuthToken from \"../utils/setAuthToken\"\nimport jwt_decode from \"jwt-decode\"\n\nimport { GET_ERRORS, SET_CURRENT_USER, USER_LOADING } from \"./types\"\n\n//REGISTER\nexport const registerUser = (userData, history) => dispatch => {\n    axios.post(\"/api/users/register\", userData)\n        .then(res => history.push(\"/login\"))//Redir to login page!\n        .catch(err => dispatch({type: GET_ERRORS, payload: err.response.data})\n    );\n    //WHEN REGISTERING, A USER IS AUTOMATCALLY ASSIGNED A WATCHLIST\n    const watchlist = {\n        email: user.email,\n        listname: \"Favorites\",\n        stocks: []\n    }\n    axios.post(\"/api/watchlists/add\", watchlist)\n        .then(res => localStorage.setItem(\"watchlists\", [watchlist]))//SETTING LOCAL STORAGE APPROPRIATELY\n        .catch(err => dispatch({type: GET_ERRORS, payload: err.response.data}))\n};\n\n//LOGIN\nexport const loginUser = (userData) => dispatch  => {\n    axios.post(\"http://localhost:5000/api/users/login\", userData)\n        .then(res => {\n            //SAVING TOKEN TO LOCAL STORAGE\n            console.log(res.data)\n            const { token } = res.data\n            localStorage.setItem(\"jwtToken\", token);\n            setAuthToken(token)\n            const usr = jwt_decode(token)\n            dispatch(setCurrentUser(usr))\n        })\n        .catch(err => dispatch({type: GET_ERRORS, payload: err.response.data}))\n}\n\n//SETTING SESSION USER\nexport const setCurrentUser = usr => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: usr\n    }\n}\n//SETTING USER LOADING\nexport const setUserLoading = () => {\n    return {\n        type: USER_LOADING\n    }\n}\n\nexport const logoutUser = () => dispatch => {\n    //REMOVE TOKEN FROM LOCAL STORAGE\n    localStorage.removeItem(\"jwtToken\")\n    setAuthToken(false)\n    //NOW, NO CURRENT USER\n    dispatch(setCurrentUser({}))\n}"]},"metadata":{},"sourceType":"module"}